<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>02 | 固若金汤的根本: 对称加密与非对称加密 | vitepress-demo</title>
    <meta name="description" content="一个vitepree-demo....">
    <link rel="stylesheet" href="/vitepress-demo/assets/style.17bf9256.css">
    <link rel="modulepreload" href="/vitepress-demo/assets/app.436197f7.js">
    <link rel="modulepreload" href="/vitepress-demo/assets/http-protocol_05_02.md.ca0013fa.lean.js">
    
    <link rel="icon" href="favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ca9ccb7e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ca9ccb7e data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-a35e6f52><div class="container" data-v-a35e6f52><div class="VPNavBarTitle has-sidebar" data-v-a35e6f52 data-v-d5925166><a class="title" href="/vitepress-demo/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/vitepress-demo/favicon.ico" data-v-e13a1912><!--]--><!--[-->vitepress-demo<!--]--><!--[--><!--]--></a></div><div class="content" data-v-a35e6f52><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a35e6f52 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/vitepress-demo/http-protocol/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->透视 HTTP 协议<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-demo/front-spec/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->前端规范<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-demo/javascript-design-model/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->设计模式<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-demo/road-to-react-chinese/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->React之路<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-demo/advanced-core-knowledage-front-end/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->前端进阶<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-demo/about/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->关于<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 相关文档 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://staging-cn.vuejs.org/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->vue<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://www.electronjs.org/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->electron<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://cn.vitejs.dev/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->vite<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://process1024.github.io/vitepress/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->vite中文版(大佬翻译)<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://www.rollupjs.com/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->rollup<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://www.electron.build/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->electron-builder<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://router.vuejs.org/zh/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->vue-router<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://pinia.vuejs.org/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->pinia<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://vueuse.org/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->vueuse<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 1.0.0 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://zh-sky.gitee.io/electron-vue-template-doc/" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->友情连接/sky<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a35e6f52 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a3e7452b data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a35e6f52 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/GA23187/vitepress-demo" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a35e6f52 data-v-e89b88d7 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e89b88d7><div class="item appearance" data-v-e89b88d7><p class="label" data-v-e89b88d7>Appearance</p><div class="appearance-action" data-v-e89b88d7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-e89b88d7 data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e89b88d7><div class="item social-links" data-v-e89b88d7><div class="VPSocialLinks social-links-list" data-v-e89b88d7 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/GA23187/vitepress-demo" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a35e6f52 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-ca9ccb7e data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-ca9ccb7e data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup" data-v-f332cb62 data-v-2976c796><div class="title" data-v-2976c796><h2 class="title-text" data-v-2976c796>01 | 开篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/01/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | 开篇: To Be a HTTP Hero</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>02 | 破冰篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | 时势与英雄：HTTP 的前世今生</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | HTTP 是什么？HTTP 又不是什么？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>03 | HTTP 世界全览：与 HTTP 相关的各种概念</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | HTTP 世界全览：与 HTTP 相关的各种协议</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/05.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | HTTP 世界全览：与 HTTP 相关的各种协议</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/02/06.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | HTTP 世界全览：与 HTTP 相关的各种协议</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>03 | 基础篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | 键入网址再按下回车，后面究竟发生了什么？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | HTTP 报文是什么样子的？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>03 | 应该如何理解请求方法？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | 你能写出正确的网址吗？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/05.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>05 | 响应状态码该怎么用？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/06.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>06 | HTTP 有哪些特点？</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/03/07.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>07 | HTTP 有哪些优点？又有哪些缺点？</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>04 | 进阶篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | 海纳百川：HTTP 的实体数据</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | 把大象装进冰箱：HTTP 传输大文件的方法</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>03 | 排队也要讲效率：HTTP 的连接管理</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | 四通八达：HTTP 的重定向和跳转</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/05.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>05 | 让我知道你是谁：HTTP 的 Cookie 机制</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/06.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>06 | 生鲜速递：HTTP 的缓存控制</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/07.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>7 | 良心中间商：HTTP 的代理服务</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/04/08.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>08 | 冷链周转：HTTP 的缓存代理</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>05 | 安全篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | TLS 又是什么？</span><!----><!--]--><!----></a><a class="VPLink link link active" href="/vitepress-demo/http-protocol/05/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | 固若金汤的根本: 对称加密与非对称加密</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>03 | 固若金汤的根本: 数字签名与证书</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | 信任始于握手: TLS 1.2 连接过程解析</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/05.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>05 | 更好更快的握手: TLS 1.3 特性解析</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/06.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>06 | 连接太慢该怎么办 HTTPS 的优化</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/05/07.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>7 | 我应该迁移到 HTTPS 吗？</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>06 | 飞翔篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/06/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | 时代之风：HTTP/2 特性概览</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/06/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | 时代之风：HTTP/2 内核剖析</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/06/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>03 | 未来之路：HTTP/3 展望</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/06/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | 我应该迁移到 HTTP/2 吗？</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup" data-v-f332cb62 data-v-2976c796><div class="title" data-v-2976c796><h2 class="title-text" data-v-2976c796>07 | 探索篇</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/vitepress-demo/http-protocol/07/01.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>01 | Nginx：高性能的 Web 服务器</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/07/02.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>02 | OpenResty：更灵活的 Web 服务器</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/07/03.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>003 | WAF：保护我们的网络服务</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/07/04.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>04 | CDN：加速我们的网络服务</span><!----><!--]--><!----></a><a class="VPLink link link" href="/vitepress-demo/http-protocol/07/05.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>005 | WebSocket：沙盒里的 TCP</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ca9ccb7e data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-f0af2311><div class="container" data-v-f0af2311><div class="aside" data-v-f0af2311><div class="aside-curtain" data-v-f0af2311></div><div class="aside-container" data-v-f0af2311><div class="aside-content" data-v-f0af2311><div class="VPDocAside" data-v-f0af2311 data-v-aea49c31><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-aea49c31 data-v-a3de185c><div class="content" data-v-a3de185c><div class="outline-marker" data-v-a3de185c></div><div class="outline-title" data-v-a3de185c>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a3de185c><span class="visually-hidden" id="doc-outline-aria-label" data-v-a3de185c> Table of Contents for current page </span><ul class="root" data-v-a3de185c><!--[--><li data-v-a3de185c><a class="outline-link" href="#对称加密" data-v-a3de185c>对称加密</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#加密分组模式" data-v-a3de185c>加密分组模式</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#非对称加密" data-v-a3de185c>非对称加密</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#混合加密" data-v-a3de185c>混合加密</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#小结" data-v-a3de185c>小结</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#课下作业" data-v-a3de185c>课下作业</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#拓展阅读" data-v-a3de185c>拓展阅读</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aea49c31></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0af2311><div class="content-container" data-v-f0af2311><!--[--><!--[--><!--[--><span class="page-info">✍️</span><span class="page-info">🕐</span><span> 🔗 <!--[--><!--]--></span><!--]--><!--]--><!--]--><main class="main" data-v-f0af2311><div style="position:relative;" class="vp-doc _vitepress-demo_http-protocol_05_02" data-v-f0af2311><div><h1 id="_02-固若金汤的根本-对称加密与非对称加密" tabindex="-1">02 | 固若金汤的根本: 对称加密与非对称加密 <a class="header-anchor" href="#_02-固若金汤的根本-对称加密与非对称加密" aria-hidden="true">#</a></h1><p>在上一讲中，我们初步学习了 HTTPS，知道 HTTPS 的安全性是由 TLS 来保证的。</p><p>你一定很好奇，它是怎么为 HTTP 增加了机密性、完整性，身份认证和不可否认等特性的呢？</p><p>先说说机密性。它是信息安全的基础，缺乏机密性 TLS 就会成为无水之源、无根之木。</p><p>实现机密性最常用的手段是 <strong>加密</strong>（encrypt），就是把消息用某种方式转换成谁也看不懂的乱码，只有掌握 <strong>特殊钥匙</strong> 的人才能再转换出原始文本。</p><p>这里的钥匙就叫做 <strong>密钥</strong>（key），加密前的消息叫 <strong>明文</strong>（plain text/clear text），加密后的乱码叫 <strong>密文</strong>（cipher text），使用密钥还原明文的过程叫 <strong>解密</strong>（decrypt），是加密的反操作，加密解密的操作过程就是 <strong>加密算法</strong> 。</p><p><strong>所有的加密算法都是公开的</strong> ，任何人都可以去分析研究，<strong>而算法使用的密钥则必须保密</strong> 。那么，这个关键的密钥又是什么呢？</p><p>由于 HTTPS、TLS 都运行在计算机上，所以密钥就是一长串的数字，但约定俗成的度量单位是 <strong>位（bit）</strong> ，而不是字节（byte）。比如，说密钥长度是 128，就是 16 字节的二进制串，密钥长度 1024，就是 128 字节的二进制串。</p><p>按照密钥的使用方式，加密可以分为两大类：<strong>对称加密和非对称加密</strong>。</p><h2 id="对称加密" tabindex="-1">对称加密 <a class="header-anchor" href="#对称加密" aria-hidden="true">#</a></h2><p><strong>对称加密</strong> 很好理解，就是指加密和解密时使用的 <strong>密钥都是同一个</strong> ，是 <strong>对称</strong> 的。只要保证了密钥的安全，那整个通信过程就可以说具有了机密性。</p><p>举个例子，你想要登录某网站，只要事先和它约定好使用一个对称密码，通信过程中传输的全是用密钥加密后的密文，只有你和网站才能解密。黑客即使能够窃听，看到的也只是乱码，因为没有密钥无法解出明文，所以就实现了机密性。</p><p><img src="/vitepress-demo/assets/8feab67c25a534f8c72077680927ab49.92b8ae52.png" alt="img"></p><p>TLS 里有非常多的对称加密算法可供选择，比如 RC4、DES、3DES、AES、ChaCha20 等，但前三种算法都被认为是不安全的，通常都禁止使用，目前常用的只有 AES 和 ChaCha20。</p><p>AES 的意思是 <strong>高级加密标准（Advanced Encryption Standard）</strong>，密钥长度可以是 128、192 或 256。它是 DES 算法的替代者，安全强度很高，性能也很好，而且有的硬件还会做特殊优化，所以非常流行，是应用最广泛的对称加密算法。</p><p>ChaCha20 是 Google 设计的另一种加密算法，密钥长度固定为 256 位，纯软件运行性能要超过 AES，曾经在移动客户端上比较流行，但 ARMv8 之后也加入了 AES 硬件优化，所以现在不再具有明显的优势，但仍然算得上是一个不错算法。</p><h2 id="加密分组模式" tabindex="-1">加密分组模式 <a class="header-anchor" href="#加密分组模式" aria-hidden="true">#</a></h2><p>对称算法还有一个 <strong>分组模式</strong> 的概念，<strong>它可以让算法用固定长度的密钥加密任意长度的明文</strong> ，把小秘密（即密钥）转化为大秘密（即密文）。</p><p>最早有 ECB、CBC、CFB、OFB 等几种分组模式，但都陆续被发现有安全漏洞，所以现在基本都不怎么用了。最新的分组模式被称为 <strong>AEAD（Authenticated Encryption with Associated Data）</strong> ，在加密的同时增加了认证的功能，常用的是 GCM、CCM 和 Poly1305。</p><p>把上面这些组合起来，就可以得到 TLS 密码套件中定义的对称加密算法。</p><p>比如，AES128-GCM，意思是密钥长度为 128 位的 AES 算法，使用的分组模式是 GCM；ChaCha20-Poly1305 的意思是 ChaCha20 算法，使用的分组模式是 Poly1305。</p><p>你可以用实验环境的 URI <code>/24-1</code> 来测试 OpenSSL 里的 AES128-CBC，在 URI 后用参数 <code>key、plain</code> 输入密钥和明文，服务器会在响应报文里输出加密解密的结果。</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">https://www.chrono.com/24-1?key=123456</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">usage: /24-1?key=xxx&amp;plain=xxx</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">algo  = aes_128_cbc</span></span>
<span class="line"><span style="color:#A6ACCD;">plain = hello openssl</span></span>
<span class="line"><span style="color:#A6ACCD;">enc   = 93a024a94083bc39fb2c2b9f5ce27c09</span></span>
<span class="line"><span style="color:#A6ACCD;">dec   = hello openssl</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>后端代码</p><div class="language-lua line-numbers-mode"><button class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#676E95;">-- Copyright (C) 2019 by chrono</span></span>
<span class="line"><span style="color:#676E95;">-- aes encrypt and decrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_aes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.aes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.string</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ffi</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> C </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">C</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- try aes_gcm</span></span>
<span class="line"><span style="color:#A6ACCD;">ffi.</span><span style="color:#82AAFF;">cdef</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> EVP_CIPHER </span><span style="color:#89DDFF;">*</span><span style="color:#82AAFF;">EVP_aes_128_ccm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">void</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> EVP_CIPHER </span><span style="color:#89DDFF;">*</span><span style="color:#82AAFF;">EVP_aes_128_gcm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">void</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">scheme</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">~=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#82AAFF;">redirect</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">host</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">request_uri</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">arg_key</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> plain </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">arg_plain</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello openssl</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> salt </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">arg_salt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> key </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    ngx.</span><span style="color:#FFCB6B;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">400</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">you must submit a key for cipher: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">..</span></span>
<span class="line"><span style="color:#A6ACCD;">            ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">uri</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">?key=xxx&amp;plain=xxx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">--&#39;?key=xxx&amp;salt=xxx&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">            )</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> cipher</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local gcm_func = C[&#39;EVP_aes_128_gcm&#39;]()</span></span>
<span class="line"><span style="color:#676E95;">--if gcm_func then</span></span>
<span class="line"><span style="color:#676E95;">--    cipher = {size = 128, cipher = &#39;gcm&#39;,</span></span>
<span class="line"><span style="color:#676E95;">--              method = gcm_func}</span></span>
<span class="line"><span style="color:#676E95;">--end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> aes_128_cbc_md5 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_aes</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">(key, salt, cipher)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local plain = &#39;hello openssl&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> enc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">aes_128_cbc_md5</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">encrypt</span><span style="color:#A6ACCD;">(plain)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> dec </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">aes_128_cbc_md5</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">decrypt</span><span style="color:#A6ACCD;">(enc)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">usage: </span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">uri</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">?key=xxx&amp;plain=xxx</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">algo  = aes_128_cbc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">plain = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">enc   = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, resty_str.</span><span style="color:#82AAFF;">to_hex</span><span style="color:#A6ACCD;">(enc))</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dec   = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, dec)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>对 lua 不熟悉，不太能看懂里面的逻辑 salt、cipher 是啥，不明白</p><h2 id="非对称加密" tabindex="-1">非对称加密 <a class="header-anchor" href="#非对称加密" aria-hidden="true">#</a></h2><p>对称加密看上去好像完美地实现了机密性，但其中有一个很大的问题：<strong>如何把密钥安全地传递给对方</strong> ，术语叫 <strong>密钥交换</strong> 。</p><p>因为在对称加密算法中只要持有密钥就可以解密。如果你和网站约定的密钥在传递途中被黑客窃取，那他就可以在之后随意解密收发的数据，通信过程也就没有机密性可言了。</p><p>你或许会说：把密钥再加密一下发过去就好了，但传输「加密密钥的密钥」又成了新问题。这就像是「鸡生蛋、蛋生鸡」，可以无限递归下去。只用对称加密算法，是绝对无法解决密钥交换的问题的。</p><p>所以，就出现了非对称加密（也叫公钥加密算法）。</p><p>它有两个密钥，一个叫 <strong>公钥</strong>（public key），一个叫 <strong>私钥</strong>（private key）。<strong>两个密钥是不同的（不对称）</strong> ，公钥可以公开给任何人使用，而私钥必须严格保密。</p><p>公钥和私钥有个特别的 <strong>单向</strong> 性，虽然都可以用来加密解密，但 <strong>公钥加密后只能用私钥解密</strong> ，反过来，<strong>私钥加密后也只能用公钥解密</strong> 。</p><p>非对称加密可以解决 <strong>密钥交换</strong> 的问题。网站秘密保管私钥，在网上任意分发公钥，你想要登录网站只要用公钥加密就行了，密文只能由私钥持有者才能解密。而黑客因为没有私钥，所以就无法破解密文。</p><p><img src="/vitepress-demo/assets/89344c2e493600b486d5349a84318417.6c63b565.png" alt="img"></p><p>非对称加密算法的设计要比对称算法难得多，在 TLS 里只有很少的几种，比如 DH、DSA、RSA、ECC 等。</p><p>RSA 可能是其中最著名的一个，几乎可以说是非对称加密的代名词，它的安全性基于 <strong>整数分解</strong> 的数学难题，使用两个超大素数的乘积作为生成密钥的材料，想要从公钥推算出私钥是非常困难的。</p><p>10 年前 RSA 密钥的推荐长度是 1024，但随着计算机运算能力的提高，现在 1024 已经不安全，普遍认为至少要 2048 位。</p><p>ECC（Elliptic Curve Cryptography）是非对称加密里的后起之秀，它基于 <strong>椭圆曲线离散对数</strong> 的数学难题，使用特定的曲线方程和基点生成公钥和私钥，子算法 ECDHE 用于密钥交换，ECDSA 用于数字签名。</p><p>目前比较常用的两个曲线是 P-256（secp256r1，在 OpenSSL 称为 prime256v1）和 x25519。P-256 是 NIST（美国国家标准技术研究所）和 NSA（美国国家安全局）推荐使用的曲线，而 x25519 被认为是最安全、最快速的曲线。</p><p>ECC 名字里的椭圆经常会引起误解，其实它的曲线并不是椭圆形，只是因为方程很类似计算椭圆周长的公式，实际的形状更像抛物线，比如下面的图就展示了两个简单的椭圆曲线。</p><p><img src="/vitepress-demo/assets/b452ceb3cbfc5c644a3053f2054b1aba.0d4320d8.jpg" alt="img"></p><p>两个简单的椭圆曲线：<code>y^2=x^3+7，y^2=x^3-x</code></p><p>比起 RSA，ECC 在安全强度和性能上都有明显的优势。160 位的 ECC 相当于 1024 位的 RSA，而 224 位的 ECC 则相当于 2048 位的 RSA。因为密钥短，所以相应的计算量、消耗的内存和带宽也就少，加密解密的性能就上去了，对于现在的移动互联网非常有吸引力。</p><p>实验环境的 URI <code>/24-2</code> 演示了 RSA1024，你在课后可以动手试一下。</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">https://www.chrono.com/24-2?key=123456</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">usage: /24-2?plain=xxx</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">-----BEGIN RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#A6ACCD;">MIGJAoGBALRafyXmEY9wBw/lvedQIjP8ZYPEY45S9pqOGYNyQoXAOVEQIMSv5eo2</span></span>
<span class="line"><span style="color:#A6ACCD;">rgWFREdp2tw25PDjL6+KF3D7sAPUI1j/Nyxq17xcUrFHskKyNnMKJpxHTDrrZmFD</span></span>
<span class="line"><span style="color:#A6ACCD;">GDj2oWw4kwRL9+m8mhpcFB0qkkJ66q3eb9bqJA7frZxsCRPDW52VAgMBAAE=</span></span>
<span class="line"><span style="color:#A6ACCD;">-----END RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">-----BEGIN RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#A6ACCD;">MIICXwIBAAKBgQC0Wn8l5hGPcAcP5b3nUCIz/GWDxGOOUvaajhmDckKFwDlRECDE</span></span>
<span class="line"><span style="color:#A6ACCD;">r+XqNq4FhURHadrcNuTw4y+vihdw+7AD1CNY/zcsate8XFKxR7JCsjZzCiacR0w6</span></span>
<span class="line"><span style="color:#A6ACCD;">62ZhQxg49qFsOJMES/fpvJoaXBQdKpJCeuqt3m/W6iQO362cbAkTw1udlQIDAQAB</span></span>
<span class="line"><span style="color:#A6ACCD;">AoGBAKpzuSWlakVJWLNSq4dZeenuCjddvcW+bSknUb+klnB4evM9LesWX1JbeV7o</span></span>
<span class="line"><span style="color:#A6ACCD;">U962kc186CUuYlwiRANZLEKCFSCqQ50KxotT3lZWdcvcQTh625hIPQAPJ5L3UGjx</span></span>
<span class="line"><span style="color:#A6ACCD;">I1er83KmDeoxk07wNAjmYrTnYXrRxaknJd6/65ke4XeQarBBAkEA3YJ5zvI+sJTp</span></span>
<span class="line"><span style="color:#A6ACCD;">JrkKnm9U/kZRMcM0QRQLw2iMR58vXmgl+xSOHdtaHs3fylq/xhCh5HlEUeqOrYmN</span></span>
<span class="line"><span style="color:#A6ACCD;">G6Ci6p+IMQJBANBvgiN1rHKT7M140rEvwIKJf2W+wU2Sf/VkJS6OE+eGb0tzZTYD</span></span>
<span class="line"><span style="color:#A6ACCD;">s4g3QLFnqPQrUsZ94NGFi8tQ8fJKbsOWtqUCQQDL0pNi6WTl9x/SkdJDlw4OK4Xq</span></span>
<span class="line"><span style="color:#A6ACCD;">1EPw3hE07a6m+MMNi6fnMTLUJlL2pVmXSYnNJuDQ6wUCm2JOLJO7KETAv6sBAkEA</span></span>
<span class="line"><span style="color:#A6ACCD;">orUZGsMmHb8ZkH/rwMMs/PmGiI8y6HIfDxjg6YmhQg+wW262KEcVY5T2HEZ2Hjyf</span></span>
<span class="line"><span style="color:#A6ACCD;">fjEPSZ99M/Z5GBFAi8/fvQJBAIMGwpXeDRi2GPhxdql1YEh8fanCq0Rz4teee6+m</span></span>
<span class="line"><span style="color:#A6ACCD;">emH+NTGnX6plyikqghnE8RAoR9TMsXR9Eg/KWvblxXS8/V4=</span></span>
<span class="line"><span style="color:#A6ACCD;">-----END RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">plain = hello openssl</span></span>
<span class="line"><span style="color:#A6ACCD;">enc   = 2dd5be865b533f4ca0b627ca05c2f709a50d0ecca808a6b28cd9f0c03f8cce84a8a19e10474226509ed196883231a974ca80ef89c142eb81adbd9e1fb0d0115e88d8fd8fde6dd9a80f5e9ebc284536a858f75e52d236d1f6b459c2a6d23a2d25e264bd9ab7dfbc225cc9ed87923d008fa6c5a87908fe162b7a6d534ee4e389ca</span></span>
<span class="line"><span style="color:#A6ACCD;">dec   = hello openssl</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>来看看后端代码</p><div class="language-lua line-numbers-mode"><button class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#676E95;">-- Copyright (C) 2019 by chrono</span></span>
<span class="line"><span style="color:#676E95;">-- rsa1024 encrypt and decrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_rsa </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.rsa</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.string</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">scheme</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">~=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#82AAFF;">redirect</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">host</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">request_uri</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> plain </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">arg_plain</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello openssl</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--[[</span></span>
<span class="line"><span style="color:#676E95;">local time = ngx.now()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">local rsa_public_key, rsa_priv_key, err = resty_rsa:generate_rsa_keys(1024)</span></span>
<span class="line"><span style="color:#676E95;">if not rsa_public_key then</span></span>
<span class="line"><span style="color:#676E95;">    ngx.say(&#39;generate rsa keys err: &#39;, err)</span></span>
<span class="line"><span style="color:#676E95;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">ngx.say(&#39;rsa1024 genkey time = &#39;, ngx.now() - time, &#39;s\n&#39;)</span></span>
<span class="line"><span style="color:#676E95;">--]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 公钥</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIGJAoGBALRafyXmEY9wBw/lvedQIjP8ZYPEY45S9pqOGYNyQoXAOVEQIMSv5eo2</span></span>
<span class="line"><span style="color:#C3E88D;">rgWFREdp2tw25PDjL6+KF3D7sAPUI1j/Nyxq17xcUrFHskKyNnMKJpxHTDrrZmFD</span></span>
<span class="line"><span style="color:#C3E88D;">GDj2oWw4kwRL9+m8mhpcFB0qkkJ66q3eb9bqJA7frZxsCRPDW52VAgMBAAE=</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#676E95;">-- 私钥</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_priv_key </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIICXwIBAAKBgQC0Wn8l5hGPcAcP5b3nUCIz/GWDxGOOUvaajhmDckKFwDlRECDE</span></span>
<span class="line"><span style="color:#C3E88D;">r+XqNq4FhURHadrcNuTw4y+vihdw+7AD1CNY/zcsate8XFKxR7JCsjZzCiacR0w6</span></span>
<span class="line"><span style="color:#C3E88D;">62ZhQxg49qFsOJMES/fpvJoaXBQdKpJCeuqt3m/W6iQO362cbAkTw1udlQIDAQAB</span></span>
<span class="line"><span style="color:#C3E88D;">AoGBAKpzuSWlakVJWLNSq4dZeenuCjddvcW+bSknUb+klnB4evM9LesWX1JbeV7o</span></span>
<span class="line"><span style="color:#C3E88D;">U962kc186CUuYlwiRANZLEKCFSCqQ50KxotT3lZWdcvcQTh625hIPQAPJ5L3UGjx</span></span>
<span class="line"><span style="color:#C3E88D;">I1er83KmDeoxk07wNAjmYrTnYXrRxaknJd6/65ke4XeQarBBAkEA3YJ5zvI+sJTp</span></span>
<span class="line"><span style="color:#C3E88D;">JrkKnm9U/kZRMcM0QRQLw2iMR58vXmgl+xSOHdtaHs3fylq/xhCh5HlEUeqOrYmN</span></span>
<span class="line"><span style="color:#C3E88D;">G6Ci6p+IMQJBANBvgiN1rHKT7M140rEvwIKJf2W+wU2Sf/VkJS6OE+eGb0tzZTYD</span></span>
<span class="line"><span style="color:#C3E88D;">s4g3QLFnqPQrUsZ94NGFi8tQ8fJKbsOWtqUCQQDL0pNi6WTl9x/SkdJDlw4OK4Xq</span></span>
<span class="line"><span style="color:#C3E88D;">1EPw3hE07a6m+MMNi6fnMTLUJlL2pVmXSYnNJuDQ6wUCm2JOLJO7KETAv6sBAkEA</span></span>
<span class="line"><span style="color:#C3E88D;">orUZGsMmHb8ZkH/rwMMs/PmGiI8y6HIfDxjg6YmhQg+wW262KEcVY5T2HEZ2Hjyf</span></span>
<span class="line"><span style="color:#C3E88D;">fjEPSZ99M/Z5GBFAi8/fvQJBAIMGwpXeDRi2GPhxdql1YEh8fanCq0Rz4teee6+m</span></span>
<span class="line"><span style="color:#C3E88D;">emH+NTGnX6plyikqghnE8RAoR9TMsXR9Eg/KWvblxXS8/V4=</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">usage: </span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">uri</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">?plain=xxx</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(rsa_public_key)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(rsa_priv_key)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> pub, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_public_key })</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> priv, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ private_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_priv_key })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local plain = &#39;hello openssl&#39;</span></span>
<span class="line"><span style="color:#676E95;">-- 使用公钥加密字符串</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> enc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pub</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">encrypt</span><span style="color:#A6ACCD;">(plain)</span></span>
<span class="line"><span style="color:#676E95;">-- 使用私钥解密秘闻得到 加密前的字符串</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> dec </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">priv</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">decrypt</span><span style="color:#A6ACCD;">(enc)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">plain = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">enc   = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, resty_str.</span><span style="color:#82AAFF;">to_hex</span><span style="color:#A6ACCD;">(enc))</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dec   = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, dec)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><p>它的使用方式，相对来说比对称加密的代码好理解一点。</p><h2 id="混合加密" tabindex="-1">混合加密 <a class="header-anchor" href="#混合加密" aria-hidden="true">#</a></h2><p>看到这里，你是不是认为可以抛弃对称加密，只用非对称加密来实现机密性呢？</p><p>很遗憾，虽然非对称加密没有 <strong>密钥交换</strong> 的问题，但因为它们都是基于复杂的数学难题，运算速度很慢，即使是 ECC 也要比 AES 差上好几个数量级。如果仅用非对称加密，虽然保证了安全，但通信速度有如乌龟、蜗牛，实用性就变成了零。</p><p>实验环境的 URI <code>/24-3</code> 对比了 AES 和 RSA 这两种算法的性能，下面列出了一次测试的结果：</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">https://www.chrono.com/24-3</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">plain = hello openssl</span></span>
<span class="line"><span style="color:#A6ACCD;">count = 1000</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">aes_128_cbc enc/dec 1000 times : 1.00ms, 12.70MB/s</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">rsa_1024 enc/dec 1000 times : 89.00ms, 146.07KB/s</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">rsa_1024/aes ratio = 89.00</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">rsa_2048 enc/dec 1000 times : 526.00ms, 24.71KB/s</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">rsa_2048/aes ratio = 526.00</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>看看后端代码</p><div class="language-lua line-numbers-mode"><button class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#676E95;">-- Copyright (C) 2019 by chrono</span></span>
<span class="line"><span style="color:#676E95;">-- aes encrypt and decrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_aes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.aes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_rsa </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.rsa</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resty_str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resty.string</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ffi</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi_null </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">null</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi_cdef </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">cdef</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi_typeof </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">typeof</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi_new </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">new</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> ffi_C </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ffi.</span><span style="color:#FFCB6B;">C</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">scheme</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> scheme </span><span style="color:#89DDFF;">~=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ngx.</span><span style="color:#82AAFF;">redirect</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">host</span><span style="color:#89DDFF;">..</span><span style="color:#A6ACCD;">ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">request_uri</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pcall</span><span style="color:#A6ACCD;">(ffi_typeof, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">struct timeval</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ffi_cdef</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">    struct timeval {</span></span>
<span class="line"><span style="color:#C3E88D;">        long int tv_sec;</span></span>
<span class="line"><span style="color:#C3E88D;">        long int tv_usec;</span></span>
<span class="line"><span style="color:#C3E88D;">    };</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> jit.</span><span style="color:#FFCB6B;">os</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Linux</span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">ffi_cdef</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">        // linux</span></span>
<span class="line"><span style="color:#C3E88D;">        int gettimeofday(struct timeval *tv, void *tz);</span></span>
<span class="line"><span style="color:#C3E88D;">        </span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">ffi_cdef</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">        // windows</span></span>
<span class="line"><span style="color:#C3E88D;">        int ngx_gettimeofday(struct timeval *tv);</span></span>
<span class="line"><span style="color:#C3E88D;">        </span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ngx_gettimeofday</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">tv</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> jit.</span><span style="color:#FFCB6B;">os</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Linux</span><span style="color:#89DDFF;">&#39; </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ffi_C.</span><span style="color:#82AAFF;">gettimeofday</span><span style="color:#A6ACCD;">(tv, ffi_null)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> ffi_C.</span><span style="color:#82AAFF;">ngx_gettimeofday</span><span style="color:#A6ACCD;">(tv)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> timeval_t </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ffi_typeof</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">struct timeval</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> tm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ffi_new</span><span style="color:#A6ACCD;">(timeval_t)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> now </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ffi_new</span><span style="color:#A6ACCD;">(timeval_t)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clock_start</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ngx_gettimeofday</span><span style="color:#A6ACCD;">(tm)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clock_elasped</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ngx_gettimeofday</span><span style="color:#A6ACCD;">(now)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">tonumber</span><span style="color:#A6ACCD;">(now.</span><span style="color:#FFCB6B;">tv_sec</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tonumber</span><span style="color:#A6ACCD;">(tm.</span><span style="color:#FFCB6B;">tv_sec</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#A6ACCD;">           (</span><span style="color:#82AAFF;">tonumber</span><span style="color:#A6ACCD;">(now.</span><span style="color:#FFCB6B;">tv_usec</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tonumber</span><span style="color:#A6ACCD;">(tm.</span><span style="color:#FFCB6B;">tv_usec</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tonumber</span><span style="color:#A6ACCD;">(ngx.</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">arg_count</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">---- aes_cbc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> plain </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello openssl</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> data_len </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">plain </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> count</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">plain = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">count = </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, count, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a_key_for_aes</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> aes_128_cbc_md5 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_aes</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">(key)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(tm)</span></span>
<span class="line"><span style="color:#82AAFF;">clock_start</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> enc, dec</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, count </span><span style="color:#89DDFF;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">    enc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">aes_128_cbc_md5</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">encrypt</span><span style="color:#A6ACCD;">(plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">    dec </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">aes_128_cbc_md5</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">decrypt</span><span style="color:#A6ACCD;">(enc)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(now)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> aes_time </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clock_elasped</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">aes_128_cbc enc/dec </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, count, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> times : </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;">--ngx.print(tonumber(now.tv_sec) - tonumber(tm.tv_sec), &#39;s &#39;)</span></span>
<span class="line"><span style="color:#676E95;">--ngx.print(tonumber(now.tv_usec) - tonumber(tm.tv_usec), &#39;us\n&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local aes_time = (tonumber(now.tv_sec) * 1000 + tonumber(now.tv_usec) / 1000) -</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(tm.tv_sec) * 1000 + tonumber(tm.tv_usec) / 1000)</span></span>
<span class="line"><span style="color:#676E95;">--local aes_time = (tonumber(now.tv_sec) - tonumber(tm.tv_sec)) * 1000 +</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(now.tv_usec) - tonumber(tm.tv_usec)) / 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">string.format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%.02fms, %.02fMB/s</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, aes_time, data_len </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> aes_time </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">flush</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">sleep</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- rsa 1024</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIGJAoGBALRafyXmEY9wBw/lvedQIjP8ZYPEY45S9pqOGYNyQoXAOVEQIMSv5eo2</span></span>
<span class="line"><span style="color:#C3E88D;">rgWFREdp2tw25PDjL6+KF3D7sAPUI1j/Nyxq17xcUrFHskKyNnMKJpxHTDrrZmFD</span></span>
<span class="line"><span style="color:#C3E88D;">GDj2oWw4kwRL9+m8mhpcFB0qkkJ66q3eb9bqJA7frZxsCRPDW52VAgMBAAE=</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_priv_key </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIICXwIBAAKBgQC0Wn8l5hGPcAcP5b3nUCIz/GWDxGOOUvaajhmDckKFwDlRECDE</span></span>
<span class="line"><span style="color:#C3E88D;">r+XqNq4FhURHadrcNuTw4y+vihdw+7AD1CNY/zcsate8XFKxR7JCsjZzCiacR0w6</span></span>
<span class="line"><span style="color:#C3E88D;">62ZhQxg49qFsOJMES/fpvJoaXBQdKpJCeuqt3m/W6iQO362cbAkTw1udlQIDAQAB</span></span>
<span class="line"><span style="color:#C3E88D;">AoGBAKpzuSWlakVJWLNSq4dZeenuCjddvcW+bSknUb+klnB4evM9LesWX1JbeV7o</span></span>
<span class="line"><span style="color:#C3E88D;">U962kc186CUuYlwiRANZLEKCFSCqQ50KxotT3lZWdcvcQTh625hIPQAPJ5L3UGjx</span></span>
<span class="line"><span style="color:#C3E88D;">I1er83KmDeoxk07wNAjmYrTnYXrRxaknJd6/65ke4XeQarBBAkEA3YJ5zvI+sJTp</span></span>
<span class="line"><span style="color:#C3E88D;">JrkKnm9U/kZRMcM0QRQLw2iMR58vXmgl+xSOHdtaHs3fylq/xhCh5HlEUeqOrYmN</span></span>
<span class="line"><span style="color:#C3E88D;">G6Ci6p+IMQJBANBvgiN1rHKT7M140rEvwIKJf2W+wU2Sf/VkJS6OE+eGb0tzZTYD</span></span>
<span class="line"><span style="color:#C3E88D;">s4g3QLFnqPQrUsZ94NGFi8tQ8fJKbsOWtqUCQQDL0pNi6WTl9x/SkdJDlw4OK4Xq</span></span>
<span class="line"><span style="color:#C3E88D;">1EPw3hE07a6m+MMNi6fnMTLUJlL2pVmXSYnNJuDQ6wUCm2JOLJO7KETAv6sBAkEA</span></span>
<span class="line"><span style="color:#C3E88D;">orUZGsMmHb8ZkH/rwMMs/PmGiI8y6HIfDxjg6YmhQg+wW262KEcVY5T2HEZ2Hjyf</span></span>
<span class="line"><span style="color:#C3E88D;">fjEPSZ99M/Z5GBFAi8/fvQJBAIMGwpXeDRi2GPhxdql1YEh8fanCq0Rz4teee6+m</span></span>
<span class="line"><span style="color:#C3E88D;">emH+NTGnX6plyikqghnE8RAoR9TMsXR9Eg/KWvblxXS8/V4=</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> pub, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_public_key })</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> priv, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ private_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_priv_key })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(tm)</span></span>
<span class="line"><span style="color:#82AAFF;">clock_start</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, count </span><span style="color:#89DDFF;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">    enc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pub</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">encrypt</span><span style="color:#A6ACCD;">(plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">    dec </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">priv</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">decrypt</span><span style="color:#A6ACCD;">(enc)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(now)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_time </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clock_elasped</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rsa_1024 enc/dec </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, count, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> times : </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;">--ngx.print(tonumber(now.tv_sec) - tonumber(tm.tv_sec), &#39;s &#39;)</span></span>
<span class="line"><span style="color:#676E95;">--ngx.print(tonumber(now.tv_usec) - tonumber(tm.tv_usec), &#39;us\n&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local rsa_time = (tonumber(now.tv_sec) * 1000 + tonumber(now.tv_usec) / 1000) -</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(tm.tv_sec) * 1000 + tonumber(tm.tv_usec) / 1000)</span></span>
<span class="line"><span style="color:#676E95;">--local rsa_time = (tonumber(now.tv_sec) - tonumber(tm.tv_sec)) * 1000 +</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(now.tv_usec) - tonumber(tm.tv_usec)) / 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">string.format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%.02fms, %.02fKB/s</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, rsa_time, data_len </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> rsa_time))</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">flush</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- ratio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">string.format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rsa_1024/aes ratio = %.02f</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, rsa_time </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> aes_time))</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">flush</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">sleep</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- rsa 2048</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--[[</span></span>
<span class="line"><span style="color:#676E95;">local rsa_public_key, rsa_priv_key, err = resty_rsa:generate_rsa_keys(2048)</span></span>
<span class="line"><span style="color:#676E95;">if not rsa_public_key then</span></span>
<span class="line"><span style="color:#676E95;">    ngx.say(&#39;generate rsa keys err: &#39;, err)</span></span>
<span class="line"><span style="color:#676E95;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">ngx.say(rsa_public_key)</span></span>
<span class="line"><span style="color:#676E95;">ngx.say(rsa_priv_key)</span></span>
<span class="line"><span style="color:#676E95;">--]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIIBCgKCAQEAv7ZuHcxFfwPqicpsxXuXmcCE4fauuDNO+FiiM2c6fzgpELP6unyl</span></span>
<span class="line"><span style="color:#C3E88D;">UWLqENPkGkQ2NmhG9qvENPB5DQVTxWVeSHGjYh8ap9VahoHTmmgUyx6r9ofi8H3e</span></span>
<span class="line"><span style="color:#C3E88D;">k1WcOF7VQlnqzZ9RmVZgFH/jd5m+h9M1FqdDS069MvvcJvjY0iHRHTs4MMNepqv8</span></span>
<span class="line"><span style="color:#C3E88D;">blawM7uD4OhXMqCIyjCC6RDznnWExPMRbkN7Nabc2HFUfuK4qXGRUZNHhDMD7Btw</span></span>
<span class="line"><span style="color:#C3E88D;">osJjk5qIhDCuWP9KJdDRrglyP2/IxR/U5ee9vNajw/1coX5+AhaLDf06yOnXNu3/</span></span>
<span class="line"><span style="color:#C3E88D;">uK965P8kM/SDczm783jWfiCiv3C4vDnZXwIDAQAB</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PUBLIC KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_priv_key </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">[[</span></span>
<span class="line"><span style="color:#C3E88D;">-----BEGIN RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#C3E88D;">MIIEpQIBAAKCAQEAv7ZuHcxFfwPqicpsxXuXmcCE4fauuDNO+FiiM2c6fzgpELP6</span></span>
<span class="line"><span style="color:#C3E88D;">unylUWLqENPkGkQ2NmhG9qvENPB5DQVTxWVeSHGjYh8ap9VahoHTmmgUyx6r9ofi</span></span>
<span class="line"><span style="color:#C3E88D;">8H3ek1WcOF7VQlnqzZ9RmVZgFH/jd5m+h9M1FqdDS069MvvcJvjY0iHRHTs4MMNe</span></span>
<span class="line"><span style="color:#C3E88D;">pqv8blawM7uD4OhXMqCIyjCC6RDznnWExPMRbkN7Nabc2HFUfuK4qXGRUZNHhDMD</span></span>
<span class="line"><span style="color:#C3E88D;">7BtwosJjk5qIhDCuWP9KJdDRrglyP2/IxR/U5ee9vNajw/1coX5+AhaLDf06yOnX</span></span>
<span class="line"><span style="color:#C3E88D;">Nu3/uK965P8kM/SDczm783jWfiCiv3C4vDnZXwIDAQABAoIBAQC0jkFZaRiOzoZm</span></span>
<span class="line"><span style="color:#C3E88D;">7bHRsFwQX2QHWQgmzZPzi65/0Roj1SW/6HIcjuY4J3uhC58KKfIQ/dbP3Of2oACy</span></span>
<span class="line"><span style="color:#C3E88D;">BbFm+Nh6TCR/diHpraQLiFxdUOc8gg+dKU/QBgvJIVj3MkGRsxPUQtdcHiBxTh1S</span></span>
<span class="line"><span style="color:#C3E88D;">eAcc7wtR4YgcdfT0/oXSYo36IgVLi+gWgRDcQMGwPJx/Qts5WbJlfWmDI+zZ8Z5y</span></span>
<span class="line"><span style="color:#C3E88D;">5VvNQCWfgCKmC74oeP3QEJVpU6lZp7nSgSsIM+83CiSs5NSftdCJhS5PA7qicuyT</span></span>
<span class="line"><span style="color:#C3E88D;">Qzs/OpB7Vk0axKsmuG9XLMtK/aARdUESqBwuh4LlEcwpLfQS5Z9BW4q5OOH1P0UP</span></span>
<span class="line"><span style="color:#C3E88D;">wLORt2TxAoGBAOTEJ/TgiZ789BBKnmlE2lDD19pKGc7hvCOh+3PksTnRji8taeaJ</span></span>
<span class="line"><span style="color:#C3E88D;">iFeoAW/S3Zvsb/ODsYhlcmw5QXB8lSW8fUfbiDy+B2ozwO1eGKpPRUT1b+qHetPF</span></span>
<span class="line"><span style="color:#C3E88D;">Wb+TT48n9bF5fndaL/mkJxU+wqYPa9YN3fymdc+ey8OSHuPsm/OZjQ65AoGBANaJ</span></span>
<span class="line"><span style="color:#C3E88D;">CKmg5iWUVNS555gfTPLnvoUlmGj1UyS8QsrogtS25qtBXGMrHbO1lfzZ3/43MwQx</span></span>
<span class="line"><span style="color:#C3E88D;">kT20fr1JIngiodJMKN/4h06v7vUrjDto14vQJrAVVi6soYu4VNN+aFM2Jo+VQtmD</span></span>
<span class="line"><span style="color:#C3E88D;">t1HQfnf8CzHaDNcaFyGoUUBDBpLLfB4yWKlFOFzXAoGBANoLAM6NKX7pOLNCfAR4</span></span>
<span class="line"><span style="color:#C3E88D;">BOHQGK/NyxV94LXR0Xqf8i/axXu//F0on1R1JJFx2ZmhXP8seY04rDvswqu1gu8J</span></span>
<span class="line"><span style="color:#C3E88D;">3hscapkCwsx98ZgNBNNnZO2aRgazBOZOBwHrJXycKLj0xQ57XpjB1iKQxDRFJJJM</span></span>
<span class="line"><span style="color:#C3E88D;">e1YxTr8KasrIPjseLXKc2265AoGAe1NnIWwXIT81zNvZoH9N0s0ZnpzQEnYEh7eZ</span></span>
<span class="line"><span style="color:#C3E88D;">hd9HZlSGIah/HZrphic6w5HTy+WbdCuyXJBn0xQ5tmniMGwLi0TpM3i7m0Cfan+I</span></span>
<span class="line"><span style="color:#C3E88D;">eRz9QHfjhQ1ECHe8e5/NBRi57gxV04h+V4/NQ9gl71Bz1StwZK7HlnNxUe2buhgj</span></span>
<span class="line"><span style="color:#C3E88D;">E5txHR0CgYEA0JE8z8kM3qCKO3RqF+xUQbJGeb5oqtRRC1O1sU9Ovc8u863tvghv</span></span>
<span class="line"><span style="color:#C3E88D;">3QAa9+WhwW5LtX3Ey5rkBicSEQC2LU1aWiiAnhWdBzsVt8ydto+JYsw7qce0rjHM</span></span>
<span class="line"><span style="color:#C3E88D;">NFN6HSMLlAWgq2ggkeT5h/btVflm6EyCIqr7LuXGQ5CqXK9tMaISM6o=</span></span>
<span class="line"><span style="color:#C3E88D;">-----END RSA PRIVATE KEY-----</span></span>
<span class="line"><span style="color:#89DDFF;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> pub, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ public_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_public_key })</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> priv, err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">resty_rsa</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">({ private_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rsa_priv_key })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(tm)</span></span>
<span class="line"><span style="color:#82AAFF;">clock_start</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, count </span><span style="color:#89DDFF;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">    enc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pub</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">encrypt</span><span style="color:#A6ACCD;">(plain)</span></span>
<span class="line"><span style="color:#A6ACCD;">    dec </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">priv</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">decrypt</span><span style="color:#A6ACCD;">(enc)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--ngx_gettimeofday(now)</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rsa_time </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clock_elasped</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rsa_2048 enc/dec </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, count, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> times : </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--local rsa_time = (tonumber(now.tv_sec) * 1000 + tonumber(now.tv_usec) / 1000) -</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(tm.tv_sec) * 1000 + tonumber(tm.tv_usec) / 1000)</span></span>
<span class="line"><span style="color:#676E95;">--local rsa_time = (tonumber(now.tv_sec) - tonumber(tm.tv_sec)) * 1000 +</span></span>
<span class="line"><span style="color:#676E95;">--                 (tonumber(now.tv_usec) - tonumber(tm.tv_usec)) / 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">string.format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%.02fms, %.02fKB/s</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, rsa_time, data_len </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> rsa_time))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- ratio</span></span>
<span class="line"><span style="color:#A6ACCD;">ngx.</span><span style="color:#82AAFF;">say</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">string.format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rsa_2048/aes ratio = %.02f</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, rsa_time </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> aes_time))</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br></div></div><p>这个代码有点复杂了，可以得到两个信息：</p><ul><li>使用不同的加密算法对同一个字符串（明文）进行加密解密，得到消耗的时间</li><li>使用明文长度 / 消耗的时间，得到性能指标</li></ul><p>可以看到，RSA 的运算速度是非常慢的，2048 位的加解密大约是 15KB/S（微秒或毫秒级），而 AES128 则是 13MB/S（纳秒级），<strong>差了几百倍</strong> 。</p><p>那么，是不是能够 <strong>把对称加密和非对称加密结合起来</strong> 呢，两者互相取长补短，即能高效地加密解密，又能安全地密钥交换。</p><p>这就是现在 TLS 里使用的 <strong>混合加密</strong> 方式，其实说穿了也很简单：</p><ol><li><strong>在通信刚开始的时候使用非对称算法</strong> ，比如 RSA、ECDHE，<strong>首先解决密钥交换的问题</strong> 。</li><li>然后用随机数产生对称算法使用的 <strong>会话密钥</strong>（session key），再用 <strong>公钥加密</strong> 。因为会话密钥很短，通常只有 16 字节或 32 字节，所以慢一点也无所谓。</li><li>对方拿到密文后用 <strong>私钥解密</strong> ，取出会话密钥。这样，双方就实现了对称密钥的安全交换，后续就不再使用非对称加密，全都使用对称加密。</li></ol><p><img src="/vitepress-demo/assets/e41f87110aeea3e548d58cc35a478e85.6897d706.png" alt="img"></p><p>这样混合加密就解决了对称加密算法的密钥交换问题，而且安全和性能兼顾，<strong>完美地实现了机密性</strong> 。</p><p>不过这只是「万里长征的第一步」，后面还有完整性、身份认证、不可否认等特性没有实现，所以现在的通信还不是绝对安全，我们下次再说。</p><h2 id="小结" tabindex="-1">小结 <a class="header-anchor" href="#小结" aria-hidden="true">#</a></h2><ol><li>加密算法的核心思想是「把一个小秘密（密钥）转化为一个大秘密（密文消息）」，守住了小秘密，也就守住了大秘密；</li><li>对称加密只使用一个密钥，运算速度快，密钥必须保密，无法做到安全的密钥交换，常用的有 AES 和 ChaCha20；</li><li>非对称加密使用两个密钥：公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题但速度慢，常用的有 RSA 和 ECC；</li><li>把对称加密和非对称加密结合起来就得到了「又好又快」的混合加密，也就是 TLS 里使用的加密方式。</li></ol><h2 id="课下作业" tabindex="-1">课下作业 <a class="header-anchor" href="#课下作业" aria-hidden="true">#</a></h2><ol><li><p>加密算法中「密钥」的名字很形象，你能试着用现实中的锁和钥匙来比喻一下吗？</p><p>加密算法是公开的，好比锁的制造方法是公开的，任何人都可以研究，但是想要开一个锁，只能用某把特定的钥匙，用其他的钥匙是打不开锁的，即想要解密特定的密文，只能用特定的密钥，用其他的密钥是无法解密的</p></li><li><p>在混合加密中用到了公钥加密，因为只能由私钥解密。那么反过来，私钥加密后任何人都可以用公钥解密，这有什么用呢？</p><p>解决了身份认证（不可抵赖），私钥少数人知道，比如只有网站，公钥所有访问网站的人都知道，你用公钥加密的密文，只有私钥才能解密，相反的，你至少知道你是和网站对话，并不是和代理或则黑客</p></li></ol><h2 id="拓展阅读" tabindex="-1">拓展阅读 <a class="header-anchor" href="#拓展阅读" aria-hidden="true">#</a></h2><ul><li><p>严格来说对称加密算法还可以分为 <strong>块加密算法( block cipher)</strong> 和 <strong>流加密算法( stream cipher)</strong>，DES、AES 等属于块加密，而 RC4、ChaCha20 属于流加密。</p></li><li><p>ECC 虽然定义了公钥和私钥，但不能直接实现密钥交换和身份认证，需要搭配 DH、DSA 等算法，形成专门的 ECDHE、 ECDSA。RSA 比较特殊，本身即支持密钥交换也支持身份认证。</p><ul><li><p>加密交换：不对称，两边所需要的密匙不一致</p></li><li><p>身份认证：公钥能解密私钥加密的密文，私钥只有持有人有，所以这个是身份认证</p><p>比如你是一个大型网站，你响应给用户的请求，它能解开说明一定是你用私钥加密的</p></li></ul></li><li><p>比特币、以太坊等区块链技术里也用到了 ECC，它们选择的曲线是 secp256k1。</p></li><li><p>由于密码学界普遍不信任 NST 和 NSA，怀疑 secp 系列曲线有潜在的弱点，所以研究出了 <code>x25519</code> ，它的名字来源于曲线方程里的参数 <code>2^255-19</code> 。另有一个更高强度的曲线 <code>×448</code>，参数是 <code>2^448-2^224-1</code> 。</p></li><li><p>在 Linux上可以使用 OpenSSL 的命令行工具来测试算法的加解密速度，例如 <code>openssl speed aes</code> 、<code> openssl speed rsa2048</code> 等。</p></li><li><p>TLS1.2 要求必须实现 TLS_RSA_WITH_AES128_CBC_SHA，TLS1.3 要求必须实现 TLS_AES_128_GCM_SHA256，并且因为前向安全的原因废除了 DH 和 RSA 密钥交换算法。</p></li><li><p>加密的分组模式到底是什么？</p><p>拿 ECB 来举例子，假设使用 aes128，密钥长度是16 字节，那么就把明文按 16 字节分组，然后每个分组用密钥加密，最后能得到 n 组加密后的密文</p></li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f0af2311 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><!----><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>最后更新时间: <time datatime="2023-02-25T09:16:09.000Z" data-v-f7d51a9c></time></p></div></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/vitepress-demo/http-protocol/05/01.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>01 | TLS 又是什么？</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/vitepress-demo/http-protocol/05/03.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>03 | 固若金汤的根本: 数字签名与证书</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-ca9ccb7e data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>Released under the MIT License.</p><p class="copyright" data-v-9f24cc86>Copyright © 2022-09-tiger</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"advanced-core-knowledage-front-end_0-ru-he-tu-po-qian-duan-kai-fa-ji-shu-ping-jing.md\":\"d5098eb2\",\"advanced-core-knowledage-front-end_050-da-hua-she-qu-he-yi-ming-ji-shu-zhe-de-zi-wo-xiu-yang.md\":\"ee3e8501\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_037-jie-mi-qian-duan-she-ji-mo-shi-shang.md\":\"7cab07f5\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_038-jie-mi-qian-duan-she-ji-mo-shi-xia.md\":\"6c80511d\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_039-pou-xi-wu-chu-bu-zai-de-shu-ju-jie-gou.md\":\"af295150\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_040-gu-lao-you-xin-chao-de-han-shu-shi.md\":\"dd731afa\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_041-na-xie-nian-chang-kao-de-qian-duan-suan-fa-shang.md\":\"c043b26d\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_042-na-xie-nian-chang-kao-de-qian-duan-suan-fa-zhong.md\":\"daab4707\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_043-na-xie-nian-chang-kao-de-qian-duan-suan-fa-xia.md\":\"ac848665\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_044-fen-xi-yi-dao-wei-xin-mian-shi-ti.md\":\"a22b9a8f\",\"advanced-core-knowledage-front-end_bian-cheng-si-wei-he-suan-fa_readme.md\":\"07eeb008\",\"advanced-core-knowledage-front-end_bu-ke-hu-shi-de-html-he-css_013-qian-duan-mian-shi-li-bu-kai-de-mian-zi-gong-cheng.md\":\"2954c9d1\",\"advanced-core-knowledage-front-end_bu-ke-hu-shi-de-html-he-css_014-jin-ji-de-css-he-html.md\":\"a4c8bc21\",\"advanced-core-knowledage-front-end_bu-ke-hu-shi-de-html-he-css_015-xiang-ying-shi-bu-ju-he-bootstrap-de-shi-xian-fen-xi.md\":\"9ada605b\",\"advanced-core-knowledage-front-end_bu-ke-hu-shi-de-html-he-css_readme.md\":\"caf314a8\",\"advanced-core-knowledage-front-end_index.md\":\"ccaac9cf\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_001-yi-wang-da-jin-this-dui-zhi-hang-shang-xia-wen-shuo-yes.md\":\"896f24e6\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_002-lao-si-ji-ye-hui-zai-bi-bao-xiang-guan-zhi-shi-dian-fan-che-shang.md\":\"bf16a805\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_003-lao-si-ji-ye-hui-zai-bi-bao-xiang-guan-zhi-shi-dian-fan-che-xia.md\":\"2ff76b0d\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_004-wo-men-bu-bei-song-api-zhi-shi-xian-api.md\":\"f8739119\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_005javascript-zhi-shi-tu-pu-he-gao-pin-kao-dian-shu-li.md\":\"9ea20b66\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_006-qi-ta-ji-chu-ti-ku.md\":\"d41de44a\",\"advanced-core-knowledage-front-end_javascript-ji-chu-qiang-hua_readme.md\":\"75350012\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_007-yi-bu-bu-ke-pa-si-ji-ying-bei-shi-jian-na-xia-shang.md\":\"4a31336f\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_008-yi-bu-bu-ke-pa-si-ji-ying-bei-shi-jian-na-xia-xia.md\":\"d6766321\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_009-ni-yi-wei-wo-zhen-de-xiang-rang-ni-shou-xie-promise-ma-shang.md\":\"0e36d63a\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_010-ni-yi-wei-wo-zhen-de-xiang-rang-ni-shou-xie-promise-ma-xia.md\":\"78cd27c5\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_011-mian-xiang-dui-xiang-he-yuan-xing-yong-bu-guo-shi-de-hua-ti.md\":\"27ffb748\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_012-jiu-jing-gai-ru-he-xue-xi-yu-shi-ju-jin-de-es.md\":\"b87ec5ec\",\"advanced-core-knowledage-front-end_javascript-yu-yan-jin-jie_readme.md\":\"614966de\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_023-shen-ru-qian-chu-mo-kuai-hua-han-treeshaking-shang.md\":\"bc35a401\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_024-shen-ru-qian-chu-mo-kuai-hua-han-treeshaking-xia.md\":\"e4daa45e\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_025webpack-gong-cheng-shi-he-qian-duan-gong-cheng-shi-shang.md\":\"af285436\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_026webpack-gong-cheng-shi-he-qian-duan-gong-cheng-shi-xia.md\":\"f18e6705\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_027-qian-duan-gong-cheng-hua-bei-hou-de-xiang-mu-zu-zhi-she-ji-shang.md\":\"6f9751e6\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_028-qian-duan-gong-cheng-hua-bei-hou-de-xiang-mu-zu-zhi-she-ji-xia.md\":\"a420827a\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_029-dai-ma-gui-fan-gong-ju-ji-bei-hou-ji-shu-she-ji-shang.md\":\"d5994cab\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_030-dai-ma-gui-fan-gong-ju-ji-bei-hou-ji-shu-she-ji-xia.md\":\"95187d14\",\"advanced-core-knowledage-front-end_qian-duan-gong-cheng-hua_readme.md\":\"833d7ff7\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_016-chu-lei-pang-tong-duo-zhong-kuang-jia.md\":\"635e1b7b\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_017-ni-zhen-de-dong-react-ma.md\":\"baf4cb17\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_018-jie-mi-react-zhen-di-zu-jian-she-ji.md\":\"2eaa769e\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_019-jie-mi-react-zhen-di-shu-ju-zhuang-tai-guan-li.md\":\"76b602d0\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_020react-de-xian-zhuang-yu-wei-lai.md\":\"906e31c5\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_021-tong-gou-ying-yong-zhong-ni-suo-hu-lve-de-xi-jie.md\":\"20be60ac\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_022-cong-kuang-jia-he-lei-ku-wo-men-gai-xue-dao-shi-mo.md\":\"595488b9\",\"advanced-core-knowledage-front-end_qian-duan-kuang-jia_readme.md\":\"28b43063\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_045-li-bu-kai-de-wang-luo-ji-chu.md\":\"5421a7db\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_046-huan-cun-shui-du-dong-yi-wen-du-ya-ba-shang.md\":\"89557521\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_047-huan-cun-shui-du-dong-yi-wen-du-ya-ba-xia.md\":\"e918f52d\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_048http-de-shen-si-wo-cong-he-er-lai-qu-xiang-he-chu.md\":\"45b2bc06\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_049-bu-ke-hu-shi-de-qian-duan-an-quan-dan-ye-ying-yong-jian-quan-she-ji.md\":\"fed93178\",\"advanced-core-knowledage-front-end_wang-luo-zhi-shi_readme.md\":\"41c66581\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_031-xing-neng-jian-kong-he-cuo-wu-shou-ji-yu-shang-bao-shang.md\":\"2d7c8d5a\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_032-xing-neng-jian-kong-he-cuo-wu-shou-ji-yu-shang-bao-xia.md\":\"996f1093\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_033-xing-neng-you-hua-wen-ti-lao-si-ji-ru-he-jie-jue-shang.md\":\"582bc45b\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_034-xing-neng-you-hua-wen-ti-lao-si-ji-ru-he-jie-jue-xia.md\":\"6769a8c6\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_035-yi-react-wei-li-shuo-shuo-kuang-jia-he-xing-neng-shang.md\":\"7e1bfe0f\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_036-yi-react-wei-li-shuo-shuo-kuang-jia-he-xing-neng-xia.md\":\"e75e971c\",\"advanced-core-knowledage-front-end_xing-neng-you-hua_readme.md\":\"2eae738b\",\"front-spec_eslint_index.md\":\"b00ea719\",\"front-spec_git_index.md\":\"73df2bff\",\"front-spec_index.md\":\"5660541a\",\"front-spec_project_index.md\":\"0d296e76\",\"front-spec_recommend_index.md\":\"a261ac60\",\"front-spec_tip_index.md\":\"383df729\",\"front-spec_vue_index.md\":\"8e8936d4\",\"http-protocol_01_01.md\":\"feab1a64\",\"http-protocol_02_01.md\":\"0f0f7ed1\",\"http-protocol_02_02.md\":\"a386a89d\",\"http-protocol_02_03.md\":\"25ede2d1\",\"http-protocol_02_04.md\":\"72b55f73\",\"http-protocol_02_05.md\":\"550b9876\",\"http-protocol_02_06.md\":\"f29599c5\",\"http-protocol_02_07.md\":\"bab7347d\",\"http-protocol_02_index.md\":\"684a6cde\",\"http-protocol_03_01.md\":\"22c59bf1\",\"http-protocol_03_02.md\":\"ab58b53a\",\"http-protocol_03_03.md\":\"dca416bd\",\"http-protocol_03_04.md\":\"c29c37cb\",\"http-protocol_03_05.md\":\"7e63a9f6\",\"http-protocol_03_06.md\":\"88f14c3c\",\"http-protocol_03_07.md\":\"e0259b88\",\"http-protocol_03_index.md\":\"777db4fe\",\"http-protocol_04_01.md\":\"bc6e3070\",\"http-protocol_04_02.md\":\"a6d91b93\",\"http-protocol_04_03.md\":\"65333f30\",\"http-protocol_04_04.md\":\"cfbaa736\",\"http-protocol_04_05.md\":\"21fb8d61\",\"http-protocol_04_06.md\":\"15866d29\",\"http-protocol_04_07.md\":\"33a70a24\",\"http-protocol_04_08.md\":\"eb785f96\",\"http-protocol_04_index.md\":\"d1568b62\",\"http-protocol_05_01.md\":\"6b46d38d\",\"http-protocol_05_02.md\":\"ca0013fa\",\"http-protocol_05_03.md\":\"760c8dad\",\"http-protocol_05_04.md\":\"db721447\",\"http-protocol_05_05.md\":\"9e6f7b2b\",\"http-protocol_05_06.md\":\"83ef0beb\",\"http-protocol_05_07.md\":\"e7e55bbd\",\"http-protocol_05_index.md\":\"5c762a72\",\"http-protocol_06_01.md\":\"adb00bfd\",\"http-protocol_06_02.md\":\"ade849f2\",\"http-protocol_06_03.md\":\"8f43c3f7\",\"http-protocol_06_04.md\":\"a72597be\",\"http-protocol_06_index.md\":\"6d1bab12\",\"http-protocol_07_01.md\":\"6acbb007\",\"http-protocol_07_02.md\":\"c6ae7e12\",\"http-protocol_07_03.md\":\"8389327d\",\"http-protocol_07_04.md\":\"a7f49893\",\"http-protocol_07_05.md\":\"56061336\",\"http-protocol_07_index.md\":\"7d062fef\",\"http-protocol_08_index.md\":\"ff957abc\",\"http-protocol_09.md\":\"efb03389\",\"http-protocol_index.md\":\"2e63bb16\",\"index.md\":\"2acb55cd\",\"javascript-design-model_mvc-mvp-mvvm.md\":\"af6562e4\",\"javascript-design-model_abstract-factory-model.md\":\"ff5886d9\",\"javascript-design-model_adapter-mode.md\":\"982172bd\",\"javascript-design-model_bridge-mode.md\":\"d355c46e\",\"javascript-design-model_builder-mode.md\":\"af6d7a6e\",\"javascript-design-model_chain-mode.md\":\"d8164fc2\",\"javascript-design-model_chain-of-responsibility-mode.md\":\"51fe1a5b\",\"javascript-design-model_closures-and-higher-order-functions.md\":\"115e2ae6\",\"javascript-design-model_combination-mode.md\":\"faf66933\",\"javascript-design-model_command-mode.md\":\"3e8159a3\",\"javascript-design-model_decorator-mode.md\":\"0efab467\",\"javascript-design-model_design-principles.md\":\"1375d255\",\"javascript-design-model_es6.md\":\"d4d426b3\",\"javascript-design-model_factory-mode.md\":\"b28cca5e\",\"javascript-design-model_flyweight-mode.md\":\"ba723624\",\"javascript-design-model_index.md\":\"b3c84f61\",\"javascript-design-model_inheritance-and-prototype-chain.md\":\"d6f7c025\",\"javascript-design-model_iterator-mode.md\":\"2bd65d7f\",\"javascript-design-model_mediator-mode.md\":\"6629b9f8\",\"javascript-design-model_middleware.md\":\"1addde0a\",\"javascript-design-model_module-mode.md\":\"ff915dbd\",\"javascript-design-model_outward-mode.md\":\"8c81cdb3\",\"javascript-design-model_proxy-mode.md\":\"2c4888da\",\"javascript-design-model_published-subscribe-mode.md\":\"231bb725\",\"javascript-design-model_single-mode.md\":\"b9bde32d\",\"javascript-design-model_state-mode.md\":\"194d0d0b\",\"javascript-design-model_strategy-mode.md\":\"404924bb\",\"javascript-design-model_template-method-mode.md\":\"50c18173\",\"javascript-design-model_this.md\":\"c431384d\",\"road-to-react-chinese_readme.md\":\"e1582165\",\"road-to-react-chinese_contributor.md\":\"41ad9d53\",\"road-to-react-chinese_foreword.md\":\"1018267f\",\"road-to-react-chinese_glossar.md\":\"a7ae4478\",\"road-to-react-chinese_index.md\":\"e3019189\",\"road-to-react-chinese_intro.md\":\"2b1c6471\",\"road-to-react-chinese_outline.md\":\"a23b6f82\",\"road-to-react-chinese_react-deploy_build.md\":\"b68eb53e\",\"road-to-react-chinese_react-deploy_firebase.md\":\"cd219d2d\",\"road-to-react-chinese_react-legacy_class-components-state.md\":\"3b8d2bf4\",\"road-to-react-chinese_react-legacy_class-components.md\":\"1448364d\",\"road-to-react-chinese_react-legacy_imperative-react.md\":\"98017956\",\"road-to-react-chinese_react-maintenance_performance.md\":\"55fce6bc\",\"road-to-react-chinese_react-maintenance_project-structure.md\":\"44a4844a\",\"road-to-react-chinese_react-maintenance_testing.md\":\"ee285cb5\",\"road-to-react-chinese_react-maintenance_typescript.md\":\"edcff45e\",\"road-to-react-chinese_react-modern-advanced_paginated-fetch.md\":\"33f3cde3\",\"road-to-react-chinese_react-modern-advanced_remember-last-searches.md\":\"4cb90214\",\"road-to-react-chinese_react-modern-advanced_reverse-sort.md\":\"fcbcce2e\",\"road-to-react-chinese_react-modern-advanced_sorting.md\":\"a5afe8a7\",\"road-to-react-chinese_react-modern_advanced-state.md\":\"a231d9ff\",\"road-to-react-chinese_react-modern_async-await.md\":\"bcc3c74a\",\"road-to-react-chinese_react-modern_asynchronous-data.md\":\"e56d5bc6\",\"road-to-react-chinese_react-modern_callback-handlers.md\":\"bb15bbbf\",\"road-to-react-chinese_react-modern_component-composition.md\":\"2c1aebe9\",\"road-to-react-chinese_react-modern_component-definition.md\":\"6173d616\",\"road-to-react-chinese_react-modern_component-instantiation.md\":\"7d4b909a\",\"road-to-react-chinese_react-modern_conditional-rendering.md\":\"5ee59a55\",\"road-to-react-chinese_react-modern_controlled-components.md\":\"3b378625\",\"road-to-react-chinese_react-modern_custom-hooks.md\":\"2a81572e\",\"road-to-react-chinese_react-modern_data-fetching.md\":\"e906709f\",\"road-to-react-chinese_react-modern_data-re-fetching.md\":\"f490f341\",\"road-to-react-chinese_react-modern_explicit-data-fetching.md\":\"4f1e0225\",\"road-to-react-chinese_react-modern_forms.md\":\"fd3f19e3\",\"road-to-react-chinese_react-modern_fragments.md\":\"2f120899\",\"road-to-react-chinese_react-modern_handler-function.md\":\"bbf132fb\",\"road-to-react-chinese_react-modern_hello-react.md\":\"8a6e1aae\",\"road-to-react-chinese_react-modern_imperative.md\":\"bad6c6d9\",\"road-to-react-chinese_react-modern_impossible-state.md\":\"3431472e\",\"road-to-react-chinese_react-modern_inline-handler.md\":\"6a0d6bc3\",\"road-to-react-chinese_react-modern_jsx.md\":\"a69daa0f\",\"road-to-react-chinese_react-modern_lifting-state.md\":\"a0c2fd05\",\"road-to-react-chinese_react-modern_lists.md\":\"3158106d\",\"road-to-react-chinese_react-modern_meet-another-react-component.md\":\"797b1169\",\"road-to-react-chinese_react-modern_meet-the-react-component.md\":\"aa360e09\",\"road-to-react-chinese_react-modern_memoized-handler.md\":\"33a9d9d7\",\"road-to-react-chinese_react-modern_props-handling.md\":\"4ee57832\",\"road-to-react-chinese_react-modern_props.md\":\"7fc8332d\",\"road-to-react-chinese_react-modern_react-dom.md\":\"4db17cf1\",\"road-to-react-chinese_react-modern_requirements.md\":\"a8b1fd2e\",\"road-to-react-chinese_react-modern_reusable-components.md\":\"61fe0d09\",\"road-to-react-chinese_react-modern_setup.md\":\"7ba35123\",\"road-to-react-chinese_react-modern_side-effects.md\":\"9a2258cb\",\"road-to-react-chinese_react-modern_state.md\":\"7c8c5155\",\"road-to-react-chinese_react-modern_third-party-libraries.md\":\"7c3123db\",\"road-to-react-chinese_react-styling_css-modules.md\":\"0e61efe1\",\"road-to-react-chinese_react-styling_css.md\":\"720be00f\",\"road-to-react-chinese_react-styling_styled-components.md\":\"bba9487d\",\"road-to-react-chinese_react-styling_svg.md\":\"33de9877\",\"start_index.md\":\"a97452b3\"}")</script>
    <script type="module" async src="/vitepress-demo/assets/app.436197f7.js"></script>
    
  </body>
</html>